# LeetCode 7. Reverse Integer 反轉整數

## 題目描述

給你一個 32 位元有符號整數 `x`，回傳 `x` 的數字反轉後的結果。

如果反轉後超出 32 位元整數範圍 `[-2³¹, 2³¹ - 1]`，回傳 `0`。

### 範例

| 輸入 | 輸出 |
|------|------|
| 123 | 321 |
| -123 | -321 |
| 120 | 21 |

---

## 解題思路

### 核心觀念：數字拆解法 (Digit Manipulation)

利用「取餘數」和「整數除法」來一位一位處理數字。

| 操作 | 功能 | 範例 |
|------|------|------|
| `數字 % 10` | 取出最後一位 | `123 % 10` → `3` |
| `數字 // 10` | 去掉最後一位 | `123 // 10` → `12` |

### 反轉過程演示

以 `123` 為例：

```
步驟    數字    餘數    結果計算            結果
1       123     3       0 × 10 + 3          3
2       12      2       3 × 10 + 2          32
3       1       1       32 × 10 + 1         321
4       0       停止
```

### 關鍵公式

```
結果 = 結果 × 10 + 餘數
```

---

## 需要處理的特殊情況

### 1. 負數處理

- Python 對負數取餘數會有奇怪的結果
- 解法：先記住正負號，轉成正數處理，最後再加回負號

### 2. 溢位檢查

- 32 位元整數範圍：`-2147483648` 到 `2147483647`
- 超出範圍要回傳 `0`

---

## 完整程式碼

```python
class Solution(object):
    def reverse(self, x):
        result = 0 
        num = x
        needabs = 0

        # 處理負數：記住是負數，然後轉正數
        if num < 0:
            num = abs(num)
            needabs = 1 

        # 逐位反轉
        while num:
            remainder = num % 10          # 取出最後一位
            result = result * 10 + remainder  # 組合到結果
            num = num // 10               # 去掉最後一位

        # 加回負號
        if needabs:
            result = result * -1

        # 溢位檢查
        if not -2147483648 <= result <= 2147483647:
            return 0

        return result
```

---

## 程式碼結構圖

```
reverse(x)
    │
    ├── 1. 初始化
    │       result = 0
    │       num = x
    │       needabs = 0
    │
    ├── 2. 負數處理
    │       if num < 0:
    │           記住是負數
    │           轉成正數
    │
    ├── 3. 反轉迴圈 (while num)
    │       │
    │       ├── 取餘數 (最後一位)
    │       ├── 結果 = 結果 × 10 + 餘數
    │       └── 整數除法 (去掉最後一位)
    │
    ├── 4. 還原負號
    │       if needabs: result × -1
    │
    └── 5. 溢位檢查
            超出範圍 → return 0
            正常 → return result
```

---

## 重點記憶

1. **取餘數 `%`**：拿到最後一位數字
2. **整數除法 `//`**：去掉最後一位數字
3. **組合公式**：`result = result * 10 + remainder`
4. **負數先轉正**：Python 負數取餘數有問題
5. **溢位檢查**：32 位元範圍 `[-2³¹, 2³¹ - 1]`

---

## 時間與空間複雜度

- **時間複雜度**：O(log x) — 數字有幾位就跑幾次迴圈
- **空間複雜度**：O(1) — 只用了幾個變數
